"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9514],{5680:(e,r,t)=>{t.d(r,{xA:()=>d,yg:()=>m});var n=t(6540);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=n.createContext({}),l=function(e){var r=n.useContext(c),t=r;return e&&(t="function"==typeof e?e(r):s(s({},r),e)),t},d=function(e){var r=l(e.components);return n.createElement(c.Provider,{value:r},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},f=n.forwardRef((function(e,r){var t=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=l(t),f=o,m=u["".concat(c,".").concat(f)]||u[f]||p[f]||a;return t?n.createElement(m,s(s({ref:r},d),{},{components:t})):n.createElement(m,s({ref:r},d))}));function m(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=f;var i={};for(var c in r)hasOwnProperty.call(r,c)&&(i[c]=r[c]);i.originalType=e,i[u]="string"==typeof e?e:o,s[1]=i;for(var l=2;l<a;l++)s[l]=t[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,t)}f.displayName="MDXCreateElement"},6794:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var n=t(8168),o=(t(6540),t(5680));const a={},s=void 0,i={unversionedId:"kvrocks2redis",id:"kvrocks2redis",title:"kvrocks2redis",description:"kvrocks2redis",source:"@site/docs/kvrocks2redis.md",sourceDirName:".",slug:"/kvrocks2redis",permalink:"/docs/kvrocks2redis",draft:!1,editUrl:"https://github.com/apache/kvrocks-website/tree/main/docs/kvrocks2redis.md",tags:[],version:"current",lastUpdatedBy:"tison",lastUpdatedAt:1705466263,formattedLastUpdatedAt:"Jan 17, 2024",frontMatter:{},sidebar:"docs",previous:{title:"Metrics Exporter",permalink:"/docs/kvrocks-exporter"},next:{title:"References",permalink:"/docs/category/references"}},c={},l=[{value:"kvrocks2redis",id:"kvrocks2redis",level:2},{value:"How to build",id:"how-to-build",level:2},{value:"How to run",id:"how-to-run",level:2}],d={toc:l},u="wrapper";function p(e){let{components:r,...t}=e;return(0,o.yg)(u,(0,n.A)({},d,t,{components:r,mdxType:"MDXLayout"}),(0,o.yg)("h2",{id:"kvrocks2redis"},"kvrocks2redis"),(0,o.yg)("p",null,"kvrocks2redis is used to migrate the data from Apache Kvrocks\u2122 to Redis (as well as Kvrocks itself). It will read and parse data from the local dir first and then use the psync command to read the remain change streams from the target host."),(0,o.yg)("h2",{id:"how-to-build"},"How to build"),(0,o.yg)("p",null,"Please refer ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/apache/kvrocks#build"},"Kvrocks#build"),", this step will build ",(0,o.yg)("inlineCode",{parentName:"p"},"kvrocks2redis")," in the build dir as well."),(0,o.yg)("h2",{id:"how-to-run"},"How to run"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-shell"},"./build/kvrocks2redis -c kvrocks2redis.conf\n")),(0,o.yg)("p",null,"For the configurations in ",(0,o.yg)("inlineCode",{parentName:"p"},"kvrocks2redis.conf")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-text"},"# The value should be INFO, WARNING, ERROR, FATAL\nlog-level INFO\n\n# Determine whether to run on the daemonize mode or not\n# Default: no\ndaemonize no\n\n# Where to read and parse the local DB, it should be same as the `dir` in kvrocks.conf\n# Default: ./data\ndata-dir ./data\n\n# Where to store the output like the sync sequence and AOF file\n# Default: ./\noutput-dir ./\n\n# The source host:port to sync change streams after parsing the local DB\n# kvrocks <kvrocks_ip> <kvrocks_port> [<kvrocks_auth>]\nkvrocks 127.0.0.1 6666\n\n# If the source Kvrocks enabled the cluster mode, should enable it here as well.\n# Default: no\ncluster-enabled no\n\n# Synchronize the specified namespace data to the specified Redis DB.\n# Warning: It will flush the target redis DB data first before syncing the data.\n#\n# namespace.{namespace} <redis_ip> <redis_port> [<redis_auth> <redis_db_number>]\n# Default redis_db_number is 0\nnamespace.__namespace 127.0.0.1 6379\n")),(0,o.yg)("p",null,"To be noticed, the ",(0,o.yg)("inlineCode",{parentName:"p"},"kvrocks2redis")," must be deployed on the same machine as the Kvrocks instance since it needs to read the data from the local DB dir."))}p.isMDXComponent=!0}}]);