"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9647],{5680(e,a,t){t.d(a,{xA:()=>p,yg:()=>u});var n=t(6540);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),c=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},p=function(e){var a=c(e.components);return n.createElement(l.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(t),u=r,g=m["".concat(l,".").concat(u)]||m[u]||d[u]||s;return t?n.createElement(g,i(i({ref:a},p),{},{components:t})):n.createElement(g,i({ref:a},p))}));function u(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=t.length,i=new Array(s);i[0]=m;var o={};for(var l in a)hasOwnProperty.call(a,l)&&(o[l]=a[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=t[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3250(e,a,t){t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var n=t(8168),r=(t(6540),t(5680));const s={slug:"release-2-15-0",title:"Apache Kvrocks Release 2.15.0",authors:["hulk"]},i=void 0,o={permalink:"/blog/release-2-15-0",editUrl:"https://github.com/apache/kvrocks-website/tree/main/blog/2026-02-27-release-2-15-0/index.md",source:"@site/blog/2026-02-27-release-2-15-0/index.md",title:"Apache Kvrocks Release 2.15.0",description:"This release marks a significant step forward in Redis compatibility: the new redis-databases option closes the gap of SELECT command between Kvrocks and Redis. Applications that rely on Redis's multi-database model can now migrate to Kvrocks without any code changes.",date:"2026-02-27T00:00:00.000Z",formattedDate:"February 27, 2026",tags:[],readingTime:2.96,hasTruncateMarker:!0,authors:[{name:"Hulk Lin",title:"Apache Kvrocks PMC Member",url:"https://github.com/git-hulk",imageURL:"https://github.com/git-hulk.png",key:"hulk"}],frontMatter:{slug:"release-2-15-0",title:"Apache Kvrocks Release 2.15.0",authors:["hulk"]},nextItem:{title:"KQIR: a query engine for Apache Kvrocks that supports both SQL and RediSearch queries",permalink:"/blog/kqir-query-engine"}},l={authorsImageUrls:[void 0]},c=[{value:"Support SELECT Database",id:"support-select-database",level:3},{value:"New TimeSeries Commands",id:"new-timeseries-commands",level:3},{value:"New TDigest Commands",id:"new-tdigest-commands",level:3},{value:"End",id:"end",level:2}],p={toc:c};function d(e){let{components:a,...t}=e;return(0,r.yg)("wrapper",(0,n.A)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"This release marks a significant step forward in Redis compatibility: the new ",(0,r.yg)("inlineCode",{parentName:"p"},"redis-databases")," option closes the gap of SELECT command between Kvrocks and Redis. Applications that rely on Redis's multi-database model can now migrate to Kvrocks without any code changes."),(0,r.yg)("p",null,"Beyond that, this release expands TimeSeries and TDigest command coverage and tightens replication reliability \u2014 all while upgrading the C++ standard to C++20 and RocksDB to v10.10.1."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Highlights:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Support SELECT database")," \u2014 Kvrocks can now emulate Redis's multi-database model, unblocking migrations from Redis deployments that use ",(0,r.yg)("inlineCode",{parentName:"li"},"SELECT")," to switch between logical databases"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"New TimeSeries commands")," \u2014 TS.MREVRANGE, TS.QUERYINDEX, and TS.ALTER round out the time-series API surface for analytics-heavy workloads"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"New TDigest commands")," \u2014 TDIGEST.RANK, TDIGEST.REVRANK, TDIGEST.BYRANK, and TDIGEST.BYREVRANK enable percentile and rank queries on streaming data")),(0,r.yg)("h3",{id:"support-select-database"},"Support SELECT Database"),(0,r.yg)("p",null,"Kvrocks uses a namespace mechanism as its multi-tenancy primitive, which differs from Redis's numbered logical databases. Before this release, issuing ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT")," against Kvrocks was a no-op \u2014 the command was accepted but had no effect. v2.15.0 introduces the ",(0,r.yg)("inlineCode",{parentName:"p"},"redis-databases")," option (",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/kvrocks/pull/3294"},"#3294"),") to bridge this gap and make ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT")," behave as it does in Redis."),(0,r.yg)("p",null,"The option takes a numeric value:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"redis-databases 0")," \u2014 default; ",(0,r.yg)("inlineCode",{parentName:"li"},"SELECT")," remains a no-op (existing namespace behavior is unchanged)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"redis-databases N")," (N > 0) \u2014 enables Redis-style database switching with N logical databases; requires that no namespaces are configured")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"# kvrocks.conf\nredis-databases 16\n")),(0,r.yg)("p",null,"Once enabled, clients can issue ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT")," as they would against Redis:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'127.0.0.1:6666> SELECT 3\n# OK\n127.0.0.1:6666[3]> SET mykey "hello"\n# OK \u2014 stored in database 3\n')),(0,r.yg)("h3",{id:"new-timeseries-commands"},"New TimeSeries Commands"),(0,r.yg)("p",null,"Kvrocks's RedisTimeSeries compatibility layer gains three commands that are essential for production time-series pipelines. ",(0,r.yg)("inlineCode",{parentName:"p"},"TS.MREVRANGE")," lets you query multiple series in reverse chronological order in a single round-trip. ",(0,r.yg)("inlineCode",{parentName:"p"},"TS.QUERYINDEX")," filters series by label predicates without pulling data. ",(0,r.yg)("inlineCode",{parentName:"p"},"TS.ALTER")," modifies retention and label metadata on existing series without recreating them."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'# Create series with labels\n127.0.0.1:6666> TS.CREATE metrics:us-east:1 LABELS region us-east\n127.0.0.1:6666> TS.CREATE metrics:us-east:2 LABELS region us-east\n127.0.0.1:6666> TS.CREATE temperature:NYC LABELS sensor temperature location NYC\n\n# Add samples\nTS.ADD metrics:us-east:1 * 42\n127.0.0.1:6666> TS.ADD metrics:us-east:2 * 87\n\n# Query the last 10 samples across all "region=us-east" series, newest first\n127.0.0.1:6666> TS.MREVRANGE - + FILTER region=us-east COUNT 10\n\n# Find series matching a label filter (no data returned)\n127.0.0.1:6666> TS.QUERYINDEX sensor=temperature location=NYC\n\n# Change retention period on an existing series\n127.0.0.1:6666> TS.ALTER temperature:NYC RETENTION 86400000\n')),(0,r.yg)("h3",{id:"new-tdigest-commands"},"New TDigest Commands"),(0,r.yg)("p",null,"The TDigest sketch \u2014 useful for approximate quantile computation over streaming data \u2014 now supports rank-based queries. ",(0,r.yg)("inlineCode",{parentName:"p"},"TDIGEST.RANK")," returns the estimated rank of a value within the digest. ",(0,r.yg)("inlineCode",{parentName:"p"},"TDIGEST.BYRANK")," returns the value at a given rank. The ",(0,r.yg)("inlineCode",{parentName:"p"},"REV"),' variants work in descending order. Together these four commands make it practical to answer questions like "what percentile is this latency?" or "what is the p99 value?" directly from Kvrocks.'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# Create a TDigest key\n127.0.0.1:6666> TDIGEST.CREATE latency\n\n# Insert observations\n127.0.0.1:6666> TDIGEST.ADD latency 120 95 200 340 88 150\n\n# What rank is the value 150?\n127.0.0.1:6666> TDIGEST.RANK latency 150\n\n# What value sits at rank 4?\n127.0.0.1:6666> TDIGEST.BYRANK latency 4\n\n# What value sits at rank 4 counting from the top?\n127.0.0.1:6666> TDIGEST.BYREVRANK latency 4\n")),(0,r.yg)("h2",{id:"end"},"End"),(0,r.yg)("p",null,"Except for that, this release also includes a number of bug fixes and performance improvements. For the full list of changes, please refer to ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/kvrocks/releases/tag/v2.15.0"},"changelog")," to see all the details. We encourage users to upgrade to v2.15.0 to take advantage of these new features and improvements. As always, we welcome feedback and contributions from the community!"))}d.isMDXComponent=!0}}]);