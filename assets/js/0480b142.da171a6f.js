"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8070],{5680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>g});var r=t(6540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=r.createContext({}),l=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=l(e.components);return r.createElement(i.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=l(t),m=a,g=u["".concat(i,".").concat(m)]||u[m]||d[m]||o;return t?r.createElement(g,s(s({ref:n},p),{},{components:t})):r.createElement(g,s({ref:n},p))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,s=new Array(o);s[0]=m;var c={};for(var i in n)hasOwnProperty.call(n,i)&&(c[i]=n[i]);c.originalType=e,c[u]="string"==typeof e?e:a,s[1]=c;for(var l=2;l<o;l++)s[l]=t[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},842:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var r=t(8168),a=(t(6540),t(5680));const o={sidebar_label:"FAQs"},s="Apache Kvrocks\u2122 FAQs",c={unversionedId:"faq",id:"faq",title:"Apache Kvrocks\u2122 FAQs",description:"Question: How do I get keys num in Kvrocks?",source:"@site/docs/faq.md",sourceDirName:".",slug:"/faq",permalink:"/docs/faq",draft:!1,editUrl:"https://github.com/apache/kvrocks-website/tree/main/docs/faq.md",tags:[],version:"current",lastUpdatedBy:"xuzifu666",lastUpdatedAt:1755597046,formattedLastUpdatedAt:"Aug 19, 2025",frontMatter:{sidebar_label:"FAQs"},sidebar:"docs",previous:{title:"INFO sections",permalink:"/docs/info-sections"}},i={},l=[],p={toc:l},u="wrapper";function d(e){let{components:n,...t}=e;return(0,a.yg)(u,(0,r.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"apache-kvrocks-faqs"},"Apache Kvrocks\u2122 FAQs"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Question: How do I get keys num in Kvrocks?")),(0,a.yg)("p",null,"Kvrocks doesn't store the key number directly. It needs to scan the DB and then retrieve the key number by using the ",(0,a.yg)("inlineCode",{parentName:"p"},"dbsize scan")," command."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"127.0.0.1:6666> dbsize scan\nOK\n\n127.0.0.1:6666> info keyspace\n# Keyspace\n# Last scan db time: Thu Mar 24 06:38:39 2022\ndb0:keys=1,expires=0,avg_ttl=0,expired=0\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Question: Why didn't the Kvrocks disk size change after the FLUSHALL/FLUSHDB command was executed?")),(0,a.yg)("p",null,"To prevent the FLUSHALL/FLUSHDB command blocking the request, Kvrocks uses the RocksDB DeleteRange API to implement the flush command,\nwhich only marks the key range as deleted without reclaiming the disk space at once. Those deleted keys are recycled when the\nbackground compaction is triggered. You can use the ",(0,a.yg)("inlineCode",{parentName:"p"},"compact")," command to free up the disk space after flushing."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"127.0.0.1:6666> flushall\nOK\n\n# Send the compact command to release the disk space\n127.0.0.1:6666> compact\nOK\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Question: Why Kvrocks scan return a string iterator instead of a number")),(0,a.yg)("p",null,"For the historical design reason, Kvrocks uses the string iterator to return the scan result.\nBut after PR ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/apache/kvrocks/pull/1489"},"#1489"),"(since v2.5.0), the scan command can return a number iterator by enabling the configuration: ",(0,a.yg)("inlineCode",{parentName:"p"},"redis-cursor-compatible"),". You can also enable it in-flight by using the ",(0,a.yg)("inlineCode",{parentName:"p"},"config set")," command."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"127.0.0.1:6666> config set redis-cursor-compatible yes\nOK\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},'*Question: encounter "stdlib.h file not found" error while building Kvrocks in MacOS')),(0,a.yg)("p",null,"This issue occurs on certain versions of macOS where the ",(0,a.yg)("inlineCode",{parentName:"p"},"SYSROOT")," cannot be found.\nYou can work around it by setting ",(0,a.yg)("inlineCode",{parentName:"p"},"CMAKE_OSX_SYSROOT")," to the path of ",(0,a.yg)("inlineCode",{parentName:"p"},"MacOSX.sdk"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"./x.py build -DCMAKE_OSX_SYSROOT=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\n")))}d.isMDXComponent=!0}}]);